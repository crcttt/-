<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>注册</title>
 </head>
 <body>
  <div>用户名称：<input onfocus="uname_rule()" onblur="show_user()" placeholder="请输入名称" id="uname" maxlength="8" type="text"><span id="uname_msg"></span></div>
  <div>用户密码：<input placeholder="请输入密码" id="upwd" type="password" maxlength="12"><span id="upwd_msg"></span></div>
  <div>确认密码：<input onblur="yzupwd()" placeholder="请再次输入密码" id="isupwd" maxlength="12" type="password"><span id="isupwd_msg"></span></div>
  <div>电子邮箱：<input placeholder="请输入邮箱" id="email" type="email" ><span id="email_msg"></span></div>
  <div>用户电话：<input placeholder="请输入电话" id="phone" maxlength="11" type="text"><span id="phone_msg"></span></div>
  <div>性别：
		<input name="gender" id="man" type="radio" value="1" checked>
		<label for="n">男</label>
		<input name="gender" id="woman" value="0" type="radio">
		<label for="v">女</label>
	</div>
	<button onclick="register()">注册</button>
	<script>
	//名称获取焦点
	function uname_rule(){
		uname_msg.innerHTML="用户名4~8位";
	};
	//名称移除焦点
	function show_user(){		
		var xhr=new XMLHttpRequest();
		xhr.onreadystatechange=function(){
			if(xhr.readyState==4&&xhr.status==200){
				var result=xhr.responseText;
				console.log(result);
				//var arr=JSON.parse(result);
				if(result==1){
					uname_msg.innerHTML="该用户已存在"
				}else if(result==0) {
					uname_msg.innerHTML="用户不能为空"
				}else{
					uname_msg.innerHTML="该用户可以使用"
				};
			};
		};
		xhr.open("post","http://127.0.0.1:8080/user/query_uname",true);
		var formdata="uname="+uname.value;
		xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
		xhr.send(formdata);
	};
	
	</script>

 </body>
</html>
